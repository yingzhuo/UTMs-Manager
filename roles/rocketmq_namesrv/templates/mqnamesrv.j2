#!/bin/sh

# if [ -z "$ROCKETMQ_HOME" ] ; then
#   ## resolve links - $0 may be a link to maven's home
#   PRG="$0"

#   # need this for relative symlinks
#   while [ -h "$PRG" ] ; do
#     ls=`ls -ld "$PRG"`
#     link=`expr "$ls" : '.*-> \(.*\)$'`
#     if expr "$link" : '/.*' > /dev/null; then
#       PRG="$link"
#     else
#       PRG="`dirname "$PRG"`/$link"
#     fi
#   done

#   saveddir=`pwd`

#   ROCKETMQ_HOME=`dirname "$PRG"`/..

#   # make it fully qualified
#   ROCKETMQ_HOME=`cd "$ROCKETMQ_HOME" && pwd`

#   cd "$saveddir"
# fi

export JAVA_HOME="{{ java_home }}"
export ROCKETMQ_HOME="{{ rocketmq_home }}"

sh ${ROCKETMQ_HOME}/bin/runserver.sh -Drmq.logback.configurationFile=$ROCKETMQ_HOME/conf/rmq.namesrv.logback.xml org.apache.rocketmq.namesrv.NamesrvStartup $@