<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="30 seconds">

    <appender name="DefaultSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="DefaultAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>{{ log_dir }}/broker_default.log</file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/broker_default.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="DefaultSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="DefaultSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqBrokerSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqBrokerAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>{{ log_dir }}/broker.log</file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>{{ log_dir }}/broker.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>20</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>128MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqBrokerSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqBrokerSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqProtectionSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqProtectionAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/protection.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/protection.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqProtectionSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqProtectionSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqWaterMarkSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqWaterMarkAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/watermark.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/watermark.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqWaterMarkSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqWaterMarkSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqRocksDBSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqStoreAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/rocksdb.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/rocksdb.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>128MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqRocksDBSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqRocksDBSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqStoreSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqStoreAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/store.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/store.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>128MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqStoreSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqStoreSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqTieredStoreSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqTieredStoreAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/tiered_store.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/tiered_store.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>128MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqTieredStoreSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqTieredStoreSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqTrafficSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqTrafficAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>{{ log_dir }}/broker_traffic.log</file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>{{ log_dir }}/broker_traffic.%i.log.gz</fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqTrafficSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqTrafficSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqRemotingSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqRemotingAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/remoting.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/remoting.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqRemotingSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqRemotingSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqStoreErrorSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqStoreErrorAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/storeerror.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/storeerror.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqStoreErrorSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqStoreErrorSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqTransactionSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqTransactionAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/transaction.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/transaction.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqTransactionSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqTransactionSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqRebalanceLockSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqRebalanceLockAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/lock.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/lock.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>5</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqRebalanceLockSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqRebalanceLockSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqFilterSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqFilterAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/filter.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/filter.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqRebalanceLockSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqFilterSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqStatsSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqStatsAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/stats.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/stats.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>5</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqStatsSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqStatsSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqCommercialSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqCommercialAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/commercial.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/commercial.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>500MB</maxFileSize>
                </triggeringPolicy>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqCommercialSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqCommercialSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqPopSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqPopAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>{{ log_dir }}/pop.log</file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>{{ log_dir }}/pop.%i.log
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>20</maxIndex>
                </rollingPolicy>
                <triggeringPolicy
                        class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>128MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqPopSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqPopSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqColdCtrSiftingAppender" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqColdCtrAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>{{ log_dir }}/coldctr.log</file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>{{ log_dir }}/coldctr.%i.log
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>10</maxIndex>
                </rollingPolicy>
                <triggeringPolicy
                        class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>100MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>

    <appender name="RocketmqBrokerMetricsSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqBrokerMetricsAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/broker_metrics.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/broker_metrics.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>3</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>512MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqBrokerMetricsSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqBrokerMetricsSiftingAppender_inner"/>
    </appender>

    <appender name="RocketmqAuthAuditSiftingAppender_inner" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>brokerContainerLogDir</key>
            <defaultValue>${file.separator}</defaultValue>
        </discriminator>
        <sift>
            <appender name="RocketmqAuthAuditAppender"
                      class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>
                    {{ log_dir }}/auth_audit.log
                </file>
                <append>true</append>
                <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                    <fileNamePattern>
                        {{ log_dir }}/auth_audit.%i.log.gz
                    </fileNamePattern>
                    <minIndex>1</minIndex>
                    <maxIndex>3</maxIndex>
                </rollingPolicy>
                <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                    <maxFileSize>512MB</maxFileSize>
                </triggeringPolicy>
                <encoder>
                    <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
                    <charset class="java.nio.charset.Charset">UTF-8</charset>
                </encoder>
            </appender>
        </sift>
    </appender>
    <appender name="RocketmqAuthAuditSiftingAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="RocketmqAuthAuditSiftingAppender_inner"/>
    </appender>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyy-MM-dd HH:mm:ss,GMT+8} %p %t - %m%n</pattern>
            <charset class="java.nio.charset.Charset">UTF-8</charset>
        </encoder>
    </appender>

    <logger name="RocketmqBroker" additivity="false" level="INFO">
        <appender-ref ref="RocketmqBrokerSiftingAppender"/>
    </logger>

    <logger name="RocketmqProtection" additivity="false" level="INFO">
        <appender-ref ref="RocketmqProtectionSiftingAppender"/>
    </logger>

    <logger name="RocketmqWaterMark" additivity="false" level="INFO">
        <appender-ref ref="RocketmqWaterMarkSiftingAppender"/>
    </logger>

    <logger name="RocketmqCommon" additivity="false" level="INFO">
        <appender-ref ref="RocketmqBrokerSiftingAppender"/>
    </logger>

    <logger name="RocketmqRocksDB" additivity="false" level="INFO">
        <appender-ref ref="RocketmqRocksDBSiftingAppender"/>
    </logger>

    <logger name="RocketmqStore" additivity="false" level="INFO">
        <appender-ref ref="RocketmqStoreSiftingAppender"/>
    </logger>

    <logger name="RocketmqStoreError" additivity="false" level="INFO">
        <appender-ref ref="RocketmqStoreErrorSiftingAppender"/>
    </logger>

    <logger name="RocketmqTieredStore" additivity="false" level="INFO">
        <appender-ref ref="RocketmqTieredStoreSiftingAppender"/>
    </logger>

    <logger name="RocketmqTransaction" additivity="false" level="INFO">
        <appender-ref ref="RocketmqTransactionSiftingAppender"/>
    </logger>

    <logger name="RocketmqRebalanceLock" additivity="false" level="INFO">
        <appender-ref ref="RocketmqRebalanceLockSiftingAppender"/>
    </logger>

    <logger name="RocketmqRemoting" additivity="false" level="INFO">
        <appender-ref ref="RocketmqRemotingSiftingAppender"/>
    </logger>

    <logger name="RocketmqStats" additivity="false" level="INFO">
        <appender-ref ref="RocketmqStatsSiftingAppender"/>
    </logger>

    <logger name="RocketmqCommercial" additivity="false" level="INFO">
        <appender-ref ref="RocketmqCommercialSiftingAppender"/>
    </logger>

    <logger name="RocketmqFilter" additivity="false" level="INFO">
        <appender-ref ref="RocketmqFilterSiftingAppender"/>
    </logger>

    <logger name="RocketmqConsole" additivity="false" level="INFO">
        <appender-ref ref="STDOUT"/>
    </logger>

    <logger name="RocketmqPop" additivity="false" level="INFO">
        <appender-ref ref="RocketmqPopSiftingAppender"/>
    </logger>

    <logger name="RocketmqColdCtr" additivity="false">
        <level value="INFO"/>
        <appender-ref ref="RocketmqColdCtrSiftingAppender"/>
    </logger>

    <logger name="RocketmqTraffic" additivity="false" level="INFO">
        <appender-ref ref="RocketmqTrafficSiftingAppender"/>
    </logger>

    <!-- Use json formatter to log metrics -->
    <logger name="io.opentelemetry.exporter.logging.otlp.OtlpJsonLoggingMetricExporter" additivity="false" level="INFO">
        <appender-ref ref="RocketmqBrokerMetricsSiftingAppender"/>
    </logger>

    <logger name="io.opentelemetry.exporter.logging.LoggingMetricExporter" additivity="false" level="INFO">
        <appender-ref ref="RocketmqBrokerMetricsSiftingAppender"/>
    </logger>

    <logger name="RocketmqAuthAudit" additivity="false" level="INFO">
        <appender-ref ref="RocketmqAuthAuditSiftingAppender"/>
    </logger>

    <root level="INFO">
        <appender-ref ref="DefaultSiftingAppender"/>
    </root>

</configuration>